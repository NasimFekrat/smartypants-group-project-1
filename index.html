<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>Fetch</title>

    <!-- Bootstrap fonts/icons -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
   <!-- Bootstrap File -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

   <!-- Custom CSS File-->
   <link rel="stylesheet" href="./assets/css/style.css">

   <!-- JQuery -->
   <script src="https://code.jquery.com/jquery.js"></script>

   <!-- JavaScript File -->
   <script src="./assets/javascript/app.js"></script>

   <!-- Firebase Link -->
   <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>


</head>
<body>

    <h2>where the coffee at</h2>
    <div id="coffee-map" class="rounded-circle"></div>

    <script>
        function initMap() {
           var myhalCoords = {lat:43.660781, lng: -79.396785}; //coordinates of the myhal building
            
           //map options
           var options = {
               zoom: 17,
               center: myhalCoords
           } 
           
           //map object
           var coffeeMap = new google.maps.Map(document.getElementById('coffee-map'), options);
        
           var myhalMarker = new google.maps.Marker({ //this one will appear by default
               
            });
           

          //new, dynamic add marker function DEFINITION
          function addMarker(props) {
                var marker = new google.maps.Marker({
                    position: props.coords,
                    map: coffeeMap,
                    content: props.content
                });
                
                //as recommended by docs, check for a custom icon using an if statement so we don't get a potential 'undefined' by having it in the main marker definition
                if(props.iconImage){
                    //set icon image
                    marker.setIcon(props.iconImage);
                }
                
                //check for content
                if(props.content){
                    var contentBubble = new google.maps.InfoWindow({ //a bubble with content inside
                        content: props.content
                    });

                    marker.addListener('click', function(){ //a click function on the "marker" var in the coffeeMap object, which opens the "contentBubble" var
                        contentBubble.open(coffeeMap, marker);
                    });

                    console.log(props.content);
                }

                console.log(props.content);
           }

          //example calls:
          addMarker({
              coords:{lat:43.660781, lng: -79.397985},
              content: '<h3>Nearby Building</h3>' 
          });
         

          addMarker({
                coords: myhalCoords,
                iconImage: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
                content: '<h3>Myhal Building</h3>'
          });
           
        }
    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCeoFR81vmO8h3Ztjlkk5BPho1VWBy_fcQ&callback=initMap">
    </script>
    
</body>
</html>